{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TenderVault — Browse Tenders</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg: #f4f2ee; --surface: #faf9f7; --surface2: #ffffff;
    --border: rgba(0,0,0,0.08); --border-strong: rgba(0,0,0,0.14);
    --accent: #1a6b5a; --accent-light: #e8f4f1; --accent-glow: rgba(26,107,90,0.18);
    --text-primary: #1c1c1c; --text-secondary: #6b6b6b; --text-muted: #a0a0a0;
    --shadow-sm: 0 2px 8px rgba(0,0,0,0.05), 0 1px 2px rgba(0,0,0,0.04);
    --shadow-md: 0 8px 24px rgba(0,0,0,0.07), 0 2px 6px rgba(0,0,0,0.04);
    --radius: 14px; --radius-sm: 8px; --transition: 240ms cubic-bezier(0.4,0,0.2,1);
  }
  html { scroll-behavior: smooth; }
  body { font-family: 'DM Sans', sans-serif; background: var(--bg); color: var(--text-primary); min-height: 100vh; display: flex; }

  /* SIDEBAR */
  .sidebar { width: 260px; min-height: 100vh; background: var(--surface2); border-right: 1px solid var(--border); display: flex; flex-direction: column; position: fixed; top: 0; left: 0; bottom: 0; z-index: 100; box-shadow: var(--shadow-sm); }
  .sidebar-logo { padding: 28px 24px 20px; border-bottom: 1px solid var(--border); }
  .logo-mark { display: flex; align-items: center; gap: 10px; }
  .logo-icon { width: 36px; height: 36px; background: var(--accent); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
  .logo-icon svg { width: 18px; height: 18px; fill: none; stroke: #fff; stroke-width: 1.8; }
  .logo-text { font-family: 'Cormorant Garamond', serif; font-size: 22px; font-weight: 600; letter-spacing: 0.01em; color: var(--text-primary); }
  .logo-sub { font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-muted); margin-top: 2px; }
  .sidebar-nav { flex: 1; padding: 16px 12px; }
  .nav-section-label { font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-muted); padding: 12px 12px 6px; font-weight: 500; }
  .nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: var(--radius-sm); color: var(--text-secondary); font-size: 14px; font-weight: 400; cursor: pointer; transition: all var(--transition); text-decoration: none; margin-bottom: 2px; border: 1px solid transparent; }
  .nav-item svg { width: 16px; height: 16px; stroke: currentColor; fill: none; stroke-width: 1.7; flex-shrink: 0; }
  .nav-item:hover { background: var(--accent-light); color: var(--accent); border-color: rgba(26,107,90,0.12); }
  .nav-item.active { background: var(--accent); color: #fff; font-weight: 500; box-shadow: 0 4px 12px var(--accent-glow); }
  .nav-item.active svg { stroke: #fff; }
  .nav-badge { margin-left: auto; background: rgba(26,107,90,0.12); color: var(--accent); font-size: 11px; font-weight: 600; padding: 2px 7px; border-radius: 20px; }
  .nav-item.active .nav-badge { background: rgba(255,255,255,0.22); color: #fff; }
  .sidebar-footer { padding: 16px 12px; border-top: 1px solid var(--border); }
  .user-card { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: var(--radius-sm); transition: background var(--transition); cursor: pointer; }
  .user-card:hover { background: var(--bg); }
  .user-avatar { width: 34px; height: 34px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), #2d9576); display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 600; color: #fff; flex-shrink: 0; }
  .user-name { font-size: 13px; font-weight: 500; color: var(--text-primary); }
  .user-role { font-size: 11px; color: var(--text-muted); }

  /* MAIN */
  .main { margin-left: 260px; flex: 1; min-height: 100vh; display: flex; flex-direction: column; }
  .topbar { background: rgba(244,242,238,0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); padding: 0 36px; height: 64px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 50; }
  .topbar-title { font-family: 'Cormorant Garamond', serif; font-size: 24px; font-weight: 500; letter-spacing: -0.01em; }
  .topbar-actions { display: flex; align-items: center; gap: 10px; }
  .icon-btn { width: 38px; height: 38px; border-radius: var(--radius-sm); border: 1px solid var(--border); background: var(--surface2); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all var(--transition); color: var(--text-secondary); }
  .icon-btn svg { width: 16px; height: 16px; stroke: currentColor; fill: none; stroke-width: 1.7; }
  .icon-btn:hover { border-color: var(--accent); color: var(--accent); box-shadow: var(--shadow-sm); }
  .content { padding: 36px; flex: 1; }

  /* PAGE HEADER */
  .page-header { margin-bottom: 28px; }
  .page-header h2 { font-family: 'Cormorant Garamond', serif; font-size: 32px; font-weight: 500; letter-spacing: -0.01em; }
  .page-header p { color: var(--text-secondary); font-size: 14px; margin-top: 4px; }

  /* STATS */
  .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 28px; }
  .stat-card { background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px 22px; transition: all var(--transition); cursor: default; }
  .stat-card:hover { box-shadow: var(--shadow-md); transform: translateY(-2px); }
  .stat-label { font-size: 11px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); font-weight: 500; }
  .stat-value { font-family: 'Cormorant Garamond', serif; font-size: 34px; font-weight: 600; color: var(--text-primary); line-height: 1.1; margin: 6px 0 4px; }
  .stat-change { font-size: 12px; color: var(--accent); font-weight: 500; }

  /* SEARCH */
  .search-wrap { display: flex; align-items: center; gap: 12px; margin-bottom: 24px; }
  .search-field { flex: 1; position: relative; }
  .search-field svg { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; stroke: var(--text-muted); fill: none; stroke-width: 1.7; pointer-events: none; }
  .search-field input { width: 100%; padding: 11px 14px 11px 40px; background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius-sm); font-family: 'DM Sans', sans-serif; font-size: 14px; color: var(--text-primary); transition: all var(--transition); outline: none; }
  .search-field input::placeholder { color: var(--text-muted); }
  .search-field input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-glow); }
  .filter-btn { display: flex; align-items: center; gap: 7px; padding: 10px 16px; background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius-sm); font-family: 'DM Sans', sans-serif; font-size: 13px; color: var(--text-secondary); cursor: pointer; transition: all var(--transition); font-weight: 400; }
  .filter-btn svg { width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 1.7; }
  .filter-btn:hover { border-color: var(--accent); color: var(--accent); }

  /* TENDER CARDS */
  .tenders-grid { display: grid; gap: 14px; }
  .tender-card { background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius); padding: 22px 24px; display: grid; grid-template-columns: 1fr auto; gap: 16px; transition: all var(--transition); cursor: pointer; position: relative; overflow: hidden; }
  .tender-card::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: var(--accent); opacity: 0; transition: opacity var(--transition); }
  .tender-card:hover { box-shadow: var(--shadow-md); transform: translateY(-1px); border-color: var(--border-strong); }
  .tender-card:hover::before { opacity: 1; }
  .tender-header { display: flex; align-items: flex-start; gap: 14px; margin-bottom: 12px; }
  .tender-icon { width: 42px; height: 42px; flex-shrink: 0; border-radius: 10px; background: var(--accent-light); display: flex; align-items: center; justify-content: center; }
  .tender-icon svg { width: 18px; height: 18px; stroke: var(--accent); fill: none; stroke-width: 1.6; }
  .tender-title { font-size: 15px; font-weight: 500; color: var(--text-primary); line-height: 1.4; }
  .tender-dept { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
  .tender-meta { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 12px; }
  .meta-item { display: flex; flex-direction: column; gap: 2px; }
  .meta-key { font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); font-weight: 500; }
  .meta-val { font-size: 13px; font-weight: 500; color: var(--text-primary); }
  .tender-actions { display: flex; flex-direction: column; align-items: flex-end; gap: 10px; }
  .status-pill { font-size: 11px; font-weight: 500; padding: 4px 10px; border-radius: 20px; letter-spacing: 0.04em; }
  .status-open { background: #e8f5e9; color: #2e7d32; }
  .status-closing { background: #fff3e0; color: #e65100; }
  .status-closed { background: #f5f5f5; color: #757575; }
  .deadline { font-size: 12px; color: var(--text-muted); text-align: right; }
  .btn-outline { padding: 8px 16px; border-radius: var(--radius-sm); border: 1px solid var(--accent); color: var(--accent); font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 500; cursor: pointer; background: transparent; transition: all var(--transition); }
  .btn-outline:hover { background: var(--accent); color: #fff; box-shadow: 0 4px 14px var(--accent-glow); transform: scale(1.02); }

  @media (max-width: 1100px) { .stats-row { grid-template-columns: repeat(2, 1fr); } }
  @media (max-width: 768px) { .sidebar { width: 220px; } .main { margin-left: 220px; } .content { padding: 24px; } }
</style>
</head>
<body>
<aside class="sidebar">
  <div class="sidebar-logo">
    <div class="logo-mark">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24"><path d="M9 12h6m-3-3v6M5 8V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2M3 8h18v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8z"/></svg>
      </div>
      <div>
        <div class="logo-text">TenderVault</div>
        <div class="logo-sub">Procurement Portal</div>
      </div>
    </div>
  </div>
  <nav class="sidebar-nav">
    <div class="nav-section-label">Main</div>
    <a class="nav-item active" href="{% url 'browse_tenders' %}">
      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
      Browse Tenders <span class="nav-badge">24</span>
    </a>
    <a class="nav-item" href="{% url 'submit_bid' %}">
      <svg viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      Submit Bid
    </a>
    <a class="nav-item" href="{% url 'track_submissions' %}">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
      Track Submission <span class="nav-badge">3</span>
    </a>
    <div class="nav-section-label">Personal</div>
    <a class="nav-item" href="{% url 'watchedtenders' %}">
      <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      Watched Tenders <span class="nav-badge">7</span>
    </a>
  </nav>
  <div class="sidebar-footer">
    <div class="user-card">
      <div class="user-avatar">AB</div>
      <div>
        <div class="user-name">Arjun Bansal</div>
        <div class="user-role">Procurement Manager</div>
      </div>
    </div>
  </div>
</aside>

<main class="main">
  <div class="topbar">
    <div class="topbar-title">Browse Tenders</div>
    <div class="topbar-actions">
      <div class="icon-btn"><svg viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg></div>
      <div class="icon-btn"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg></div>
    </div>
  </div>

  <div class="content">
    <div class="page-header">
      <h2>Active Tenders</h2>
      <p>Discover and apply for government procurement opportunities</p>
    </div>

    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-label">Active Tenders</div>
        <div class="stat-value">124</div>
        <div class="stat-change">↑ 12 new this week</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">My Bids</div>
        <div class="stat-value">8</div>
        <div class="stat-change">↑ 2 under review</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Won Contracts</div>
        <div class="stat-value">3</div>
        <div class="stat-change">↑ ₹4.2Cr total value</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Success Rate</div>
        <div class="stat-value">37%</div>
        <div class="stat-change">↑ Above industry avg</div>
      </div>
    </div>

    <div class="search-wrap">
      <div class="search-field">
        <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" placeholder="Search tenders by title, department, or category…" oninput="filterTenders(this.value)">
      </div>
      <button class="filter-btn">
        <svg viewBox="0 0 24 24"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
        Filter
      </button>
      <button class="filter-btn">
        <svg viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
        Category
      </button>
    </div>
<div class="tenders-grid" id="tenders-list">
  {% for tender in tenders %}
    <div class="tender-card" onclick="window.location.href='{% url 'submit_bid' tender.id %}'">
      <div>
        <div class="tender-header">
          <div class="tender-icon">
            <svg viewBox="0 0 24 24">
              <!-- Generic icon -->
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
          </div>
          <div>
            <div class="tender-title">{{ tender.title }}</div>
            <div class="tender-dept">{{ tender.department }}</div>
          </div>
        </div>
        <div class="tender-meta">
          <div class="meta-item">
            <span class="meta-key">Min. Turnover</span>
            <span class="meta-val">₹{{ tender.min_turnover }} Crore</span>
          </div>
          <div class="meta-item">
            <span class="meta-key">Experience Req.</span>
            <span class="meta-val">{{ tender.min_experience }} Years</span>
          </div>
          <div class="meta-item">
            <span class="meta-key">Tech Weight</span>
            <span class="meta-val">{{ tender.weight_technical }} : {{ tender.weight_price }}</span>
          </div>
          <div class="meta-item">
            <span class="meta-key">Performance Weight</span>
            <span class="meta-val">{{ tender.weight_performance }}</span>
          </div>
        </div>
      </div>
      <div class="tender-actions">
        {% if tender.status == 'published' %}
          <span class="status-pill status-open">Open</span>
          <div class="deadline">Closes on <strong>{{ tender.last_date|date:"d M Y" }}</strong></div>
          <button class="btn-outline" onclick="event.stopPropagation(); window.location.href='{% url 'submit_bid' tender.id %}'">Submit Bid</button>
        {% else %}
          <span class="status-pill status-closed">Draft</span>
          <div class="deadline">Not yet published</div>
          <button class="btn-outline" style="opacity:0.4;cursor:not-allowed">Closed</button>
        {% endif %}
      </div>
    </div>
  {% empty %}
    <p>No tenders found.</p>
  {% endfor %}
</div>


</main>

<script>
  function filterTenders(q) {
    document.querySelectorAll('.tender-card').forEach(c => {
      c.style.display = c.textContent.toLowerCase().includes(q.toLowerCase()) ? '' : 'none';
    });
  }
</script>
</body>
</html>
